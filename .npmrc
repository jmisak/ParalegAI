# IRONCLAD pnpm Configuration - Windows Optimized
# Fixes ENOENT race condition issues and MAX_PATH problems

# === Core PNPM Settings for Windows ===
# Use hoisted node_modules structure (flat, like npm/yarn)
node-linker=hoisted

# Disable symlinks entirely (Windows compatibility)
symlink=false

# Disable strict peer dependencies
strict-peer-dependencies=false

# Auto-install peers
auto-install-peers=true

# Use copy instead of hard links (more reliable on Windows)
package-import-method=copy

# Use a local store to reduce path length (Windows MAX_PATH workaround)
store-dir=.pnpm-store

# === Network Settings ===
# Increase timeout for Windows file operations
fetch-timeout=120000
fetch-retries=5
fetch-retry-factor=2
fetch-retry-mintimeout=10000
fetch-retry-maxtimeout=60000

# Increase max sockets for parallel downloads
maxsockets=10

# === NPM Fallback Settings ===
# Legacy peer deps for npm compatibility
legacy-peer-deps=true

# Engine strict disabled to allow flexibility
engine-strict=false

# Registry
registry=https://registry.npmjs.org/

# Disable audit during install for speed
audit=false

# === Shamefully Hoist (last resort for stubborn packages) ===
shamefully-hoist=true

# === Resolution Settings ===
# Resolve peer dependencies from workspace root
resolve-peers-from-workspace-root=true
